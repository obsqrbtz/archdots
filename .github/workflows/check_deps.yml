name: Check deps

on: [push]

jobs:
  checks:
    name: Check install script
    runs-on: ubuntu-latest
    container:
      image: archlinux:latest
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
    - name: Checkout submodules
      run: |
        git submodule update --init --recursive
    - name: Run install script
      run: |
        chmod +x scripts/install_deps.sh
        scripts/install_deps.sh
        rm .gitconfig
        stow -R -v -t ~ .
