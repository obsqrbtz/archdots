name: Check deps

on: [push]

jobs:
  checks:
    name: Check install script
    runs-on: ubuntu-latest
    container:
      image: archlinux:latest
    steps:
    - name: Checkout
      run: |
        pacman -Sy && pacman -S git --noconfirm
        git clone https://github.com/obsqrbtz/archdots.git .dotfiles
        cd .dotfiles
        git submodule update --init --recursive
    - name: Run install script
      run: |
        chmod +x scripts/install_deps.sh
        scripts/install_deps.sh
        rm .gitconfig
        stow -R -v -t ~ .
